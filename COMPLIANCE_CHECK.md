# Проверка соответствия оригинальному процессу установки OpenCart

## Порядок шагов в оригинале OpenCart:

1. **install()** - проверка файла, начало процесса
2. **unzip()** - распаковка, удаление исходного zip
3. **move()** - перемещение файлов (использует `rename()`)
4. **xml()** - обработка install.xml, добавление модификации в БД
5. **remove()** - удаление временных файлов

## Что НЕ делается автоматически в оригинале:

- ❌ Применение OCMOD модификаций (делается вручную через админку)
- ❌ Очистка кэша (делается вручную)
- ❌ Добавление в таблицу extension (делается через метод install() контроллера модуля)

## Реализация в CLI:

✅ **Соответствует:**
- Порядок операций: unzip → move → xml → cleanup
- Использование `rename()` вместо `copy()`
- Добавление модификации в БД через `addModification()`
- Использование `addExtensionPath()` для каждого файла
- Алгоритм удаления временных файлов (scandir + rsort)

⚠️ **Дополнительные функции (для удобства CLI):**
- Автоматическое применение OCMOD модификаций
- Автоматическая очистка кэша
- Автоматическое определение и добавление в extension (на основе анализа файлов)

## Критические отличия:

1. **Применение модификаций** - в оригинале это делается вручную через админку (`marketplace/modification/refresh`), но для CLI автоматизация полезна
2. **Добавление в extension** - в оригинале модули вызывают метод `install()` своего контроллера, который затем вызывает `model_setting_extension->install()`. В CLI мы пытаемся определить тип и код автоматически

